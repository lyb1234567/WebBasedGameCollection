<template>
  <div class="box">
    <div class="left-box">
      <div class="left-top">
        <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink">
          <rect width="45" height="45" fill="url(#pattern0)" />
          <defs>
            <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
              <use xlink:href="#image0_2_251" transform="scale(0.00666667)" />
            </pattern>
            <image id="image0_2_251" width="150" height="150"
              xlink:href="data:image/png;base64,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" />
          </defs>
        </svg>
      </div>
      <ul class="left-nav">
        <li>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M22 20V12.174C22.0001 11.6295 21.889 11.0908 21.6735 10.5907C21.458 10.0907 21.1428 9.63992 20.747 9.266L13.374 2.298C13.0027 1.94692 12.511 1.75131 12 1.75131C11.489 1.75131 10.9973 1.94692 10.626 2.298L3.253 9.266C2.85722 9.63992 2.54195 10.0907 2.3265 10.5907C2.11104 11.0908 1.99994 11.6295 2 12.174L2 20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H20C20.5304 22 21.0391 21.7893 21.4142 21.4142C21.7893 21.0391 22 20.5304 22 20Z"
              stroke="white" stroke-width="2.17" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </li>
        <li>
          <svg width="24" height="16" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M2 5.75C2 7.18222 2.64273 8.46983 3.64931 9.34166C1.7758 10.4194 0.5 12.4359 0.5 14.75V15H0.75H2.25H2.5V14.75C2.5 12.3951 4.39507 10.5 6.75 10.5C9.10493 10.5 11 12.3951 11 14.75V15H11.25H12.75H13V14.75C13 12.3951 14.8951 10.5 17.25 10.5C19.6049 10.5 21.5 12.3951 21.5 14.75V15H21.75H23.25H23.5V14.75C23.5 12.4355 22.2246 10.4199 20.3516 9.34215C20.817 8.9405 21.2012 8.45153 21.4815 7.90156C21.8211 7.23527 21.9987 6.49827 22 5.75042V5.75C22 3.13693 19.8631 1 17.25 1C14.6369 1 12.5 3.13693 12.5 5.75C12.5 7.18172 13.1423 8.46892 14.1482 9.34074C13.2821 9.83511 12.5458 10.5282 12 11.3625C11.4544 10.5285 10.7184 9.83557 9.85262 9.34123C10.3176 8.93976 10.7014 8.45111 10.9815 7.90156C11.3211 7.23527 11.4987 6.49827 11.5 5.75042V5.75C11.5 3.13693 9.36307 1 6.75 1C4.13693 1 2 3.13693 2 5.75ZM6.75 3C8.27918 3 9.5 4.22082 9.5 5.75C9.5 7.27918 8.27918 8.5 6.75 8.5C5.22082 8.5 4 7.27918 4 5.75C4 4.22082 5.22082 3 6.75 3ZM17.25 3C18.7792 3 20 4.22082 20 5.75C20 7.27918 18.7792 8.5 17.25 8.5C15.7208 8.5 14.5 7.27918 14.5 5.75C14.5 4.22082 15.7208 3 17.25 3Z"
              fill="white" stroke="white" stroke-width="0.5" />
          </svg>
        </li>
        <li>
          <svg width="36" height="33" viewBox="0 0 36 33" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 14.4167H13.25M18 9.66667V14.4167V9.66667ZM18 14.4167V19.1667V14.4167ZM18 14.4167H22.75H18Z"
              stroke="white" stroke-width="3.16667" stroke-linecap="round" />
            <path
              d="M21.1667 27.0833C27.1374 27.0833 30.1236 27.0833 31.9777 25.2277C33.8334 23.3736 33.8334 20.3874 33.8334 14.4167C33.8334 8.44592 33.8334 5.45975 31.9777 3.60567C30.1236 1.75 27.1374 1.75 21.1667 1.75L14.8334 1.75C8.8626 1.75 5.87644 1.75 4.02235 3.60567C2.16669 5.45975 2.16669 8.44592 2.16669 14.4167C2.16669 20.3874 2.16669 23.3736 4.02235 25.2277C5.05627 26.2632 6.44169 26.7208 8.50002 26.9218"
              stroke="white" stroke-width="3.16667" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M21.1667 27.0833C19.2097 27.0833 17.0532 27.875 15.0851 28.8963C11.9216 30.5382 10.3398 31.3599 9.56085 30.8358C8.78185 30.3133 8.9291 28.6904 9.22518 25.4462L9.29168 24.7083"
              stroke="white" stroke-width="3.16667" stroke-linecap="round" />
          </svg>
        </li>
        <li>
          <svg width="20" height="24" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.97701 9.84C2.01724 9.3388 2.24477 8.87115 2.61429 8.53017C2.98381 8.18918 3.46821 7.9999 3.97101 8L16.029 8C16.5318 7.9999 17.0162 8.18918 17.3857 8.53017C17.7553 8.87115 17.9828 9.3388 18.023 9.84L18.826 19.84C18.8481 20.1152 18.813 20.392 18.7228 20.6529C18.6327 20.9139 18.4895 21.1533 18.3023 21.3562C18.1151 21.5591 17.8879 21.7211 17.635 21.8319C17.3822 21.9427 17.1091 21.9999 16.833 22H3.16701C2.89094 21.9999 2.61786 21.9427 2.36499 21.8319C2.11212 21.7211 1.88492 21.5591 1.69771 21.3562C1.51049 21.1533 1.36731 20.9139 1.27718 20.6529C1.18705 20.392 1.15193 20.1152 1.17401 19.84L1.97701 9.84V9.84Z"
              stroke="white" stroke-width="2.17" stroke-linecap="round" stroke-linejoin="round" />
            <path
              d="M14 11V6C14 4.93913 13.5786 3.92172 12.8284 3.17157C12.0783 2.42143 11.0609 2 10 2C8.93913 2 7.92172 2.42143 7.17157 3.17157C6.42143 3.92172 6 4.93913 6 6L6 11"
              stroke="white" stroke-width="2.17" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </li>
        <li>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M11.074 2.633C11.394 1.789 12.605 1.789 12.926 2.633L14.996 8.367C15.141 8.747 15.51 9 15.922 9H21.009C21.949 9 22.359 10.17 21.62 10.743L18 14C17.8379 14.1247 17.7194 14.2975 17.6615 14.4937C17.6037 14.6898 17.6094 14.8993 17.678 15.092L19 20.695C19.322 21.595 18.28 22.368 17.492 21.814L12.575 18.694C12.4066 18.5757 12.2058 18.5122 12 18.5122C11.7942 18.5122 11.5934 18.5757 11.425 18.694L6.50802 21.814C5.72102 22.368 4.67802 21.594 5.00002 20.695L6.32202 15.092C6.39059 14.8993 6.39637 14.6898 6.33852 14.4937C6.28068 14.2975 6.16217 14.1247 6.00002 14L2.38002 10.743C1.64002 10.17 2.05202 9 2.99002 9H8.07702C8.27731 9.00067 8.47308 8.9405 8.63843 8.82747C8.80378 8.71444 8.93092 8.55387 9.00302 8.367L11.073 2.633H11.074Z"
              stroke="white" stroke-width="2.17" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </li>
      </ul>
    </div>
    <div class="right-box">
      <div class="right-top">
        <div class="search-box">
          <div class="search-icon">
            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M20 20L15.514 15.506L20 20ZM18 9.5C18 11.7543 17.1045 13.9163 15.5104 15.5104C13.9163 17.1045 11.7543 18 9.5 18C7.24566 18 5.08365 17.1045 3.48959 15.5104C1.89553 13.9163 1 11.7543 1 9.5C1 7.24566 1.89553 5.08365 3.48959 3.48959C5.08365 1.89553 7.24566 1 9.5 1C11.7543 1 13.9163 1.89553 15.5104 3.48959C17.1045 5.08365 18 7.24566 18 9.5V9.5Z"
                stroke="white" stroke-width="2" stroke-linecap="round" />
            </svg>
          </div>
          <input type="text" placeholder="Search anything..." />
        </div>
        <div class="info-box">
          <div class="notice">
            <div class="icon">
              <svg width="18" height="22" viewBox="0 0 18 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M9.72099 4.00299L8.25499 3.99999C4.91099 3.99199 2.00799 6.70899 1.98499 9.99999V13.79C1.98499 14.58 1.88499 15.351 1.45399 16.008L1.16699 16.446C0.729988 17.11 1.19999 18 1.98499 18H16.015C16.8 18 17.269 17.11 16.833 16.446L16.546 16.008C16.116 15.351 16.015 14.579 16.015 13.789V10.001C15.975 6.70899 13.065 4.01099 9.72099 4.00299V4.00299Z"
                  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path
                  d="M12 18C12 18.7956 11.6839 19.5587 11.1213 20.1213C10.5587 20.6839 9.79565 21 9 21C8.20435 21 7.44129 20.6839 6.87868 20.1213C6.31607 19.5587 6 18.7956 6 18"
                  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path
                  d="M9 1C9.53043 1 10.0391 1.21071 10.4142 1.58579C10.7893 1.96086 11 2.46957 11 3V4H7V3C7 2.46957 7.21071 1.96086 7.58579 1.58579C7.96086 1.21071 8.46957 1 9 1Z"
                  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
            <div class="dailog-box" v-if="this.$store.state.isAuthenticated === true">
              <div class="tit text-primary">Game Reviews</div>
              <div v-if="this.reviews.length > 0">
                <div  v-for="review in this.reviews" v-bind:key="review">
                  <div class="item container-fluid row" v-if="review.status === 'public'">
                    <div class="item-pic col-sm-4">
                      <img v-bind:src="review.user.profilePic" alt="" />
                    </div>
                    <div class="item-p col-sm-6">
                      <p class="text-primary">{{ review.content }}</p>
                      <div class="item-sub text-secondary">{{ review.user.username }}</div>
                    </div>
                    <div class="item-p col-sm-2">
                      <p class="text-primary">{{ review.rate }}/10</p>
                    </div>
                  </div>
                  <div class="item container-fluid row" v-else>
                    <div class="item-pic col-sm-4">
                    <img src="./image/default.png" alt="" />
                  </div>
                  <div class="item-p col-sm-6">
                    <p class="text-primary">{{ review.content }}</p>
                    <div class="item-sub text-secondary">Anonymous</div>
                  </div>
                  <div class="item-p col-sm-2">
                    <p class="text-primary">{{ review.rate }}/10</p>
                  </div>
                  </div>
                </div>
              </div>
              <div v-else>
                <div class="item container-fluid row">
                  <div class="col-sm-3"></div>
                  <div class="item-p col-sm-6">
                    <p class="text-danger">No Reviews Yet</p>

                  </div>
                </div>
              </div>
              <br>
              <div class="accordion border-secondary" id="accordionExample">
                <div class="accordion-item border-secondary bg-transparent ">
                  <h2 class="accordion-header border-secondary" id="headingOne">
                    <button class="accordion-button btn-outline-primary bg-transparent text-primary border-secondary"
                      type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                      aria-controls="collapseOne">
                      Add Review
                    </button>
                  </h2>
                  <div id="collapseOne" class="accordion-collapse collapse border-secondary" aria-labelledby="headingOne"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body border-secondary">
                      <form  id="myform">
                        <div class="container-fluid row mb-3">
                          <div class="col-sm-3 mt-2 text-primary">
                            Review:
                          </div>
                          <div class="col-sm-9">
                            <textarea class="form-control border-secondary bg-transparent text-secondary" rows="4"
                              placeholder="Add Review" v-model="this.reviewContent" style="height: 100px;"
                              required></textarea>
                          </div>
                        </div>
                        <div class="container-fluid row mb-3">
                          <div class="col-sm-3 mt-2 text-primary">
                            Rating:
                          </div>
                          <div class="col-sm-9">
                            <input type="number"
                              class="form-control input-sm border-secondary bg-transparent text-secondary " id="username"
                              placeholder="Rating" v-model="this.reviewRating" required min="0" max="10" />
                          </div>
                        </div>

                        <div class="container-fluid row mb-3">
                          <div class="col-sm-3 mt-2 text-primary">Status:</div>
                          <div class="btn-group col-sm-9" role="group" aria-label="Basic radio toggle button group">
                            <input type="radio" class="btn-check btn-sm" name="btnradio" id="btnradio1" autocomplete="off"
                              value="public" v-model="this.reviewStatus">
                            <label class="btn btn-sm btn-outline-primary col-sm-2 mt-2" for="btnradio1">Public</label>

                            <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off"
                              checked value="anonymous" v-model="this.reviewStatus">
                            <label class="btn btn-sm btn-outline-secondary col-sm-2 mt-2" for="btnradio2">Private</label>
                          </div>
                        </div>
                        <div class="container-fluid mb-3 row">
                          <div class="mb-3 col-sm-3"></div>
                          <div class="mb-3 col-sm-9">
                            <button class="btn btn-outline-success" type="submit" form="myform" @click="this.submitReview()">
                              Add Review
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="dailog-box" v-else>
              <div class="tit text-primary">Login to see and upload reviews</div>
              <br>
              <br>
              <div class="container-fluid row mb-3">
                <button class="container-fluid btn btn-outline-primary" @click="$router.push('/login')">Login</button>
              </div>
            </div>

          </div>
          <!-- <div class="news"></div> -->
          <div class="info-pic" @click="$router.push('/userInfo')">
            <img src="../assets/images/pic.png" alt="" />
          </div>
        </div>
      </div>
      <div class="con-txt">
        Community
      </div>
      <div class="right-con">
        <div class="con-txt">
          <div class="box-tit text-primary" style="font-size: 30px; text-align: center;">
            Welcome to the community page
          </div>
        </div>
      </div>
      <div class="right-con" v-for="game in games" v-bind:key="game">
        <div class="con-top"><img v-bind:src="game.gameicon" alt="" /></div>
        <br>
        <div class="con-txt">
          <div class="box-tit text-primary" style="font-size: 26px; text-align: center;">
            {{ game.gameName }}
          </div>
        </div>
        <br>
        <div class="con-txt">
          <div class="box-tit text-primary">Description from the Publisher</div>
          <br>
          <div class="box-sub-tit text-secondary">
            {{ game.gameDescription }}
          </div>
          <div class="box-tit text-primary">Additional Information</div>
          <br>
          <ul class="con-ul">
            <li class="text-secondary">Label: {{ game.gameLabel }}</li>
            <li class="text-secondary">Rating {{ game.gameRate }}/10</li>
            <li class="text-secondary">Age: {{ game.gameAge }}+</li>
            <li class="text-secondary">Total Players: {{ game.collection.length }}</li>
          </ul>
          <div class="container-fluid m-4">
            <div class="box-tit text-primary">Price ${{ game.gamePrice }}</div>
            <div class="icon-box container-fluid mt-4 pt-4">
              <div class="col-sm-2"></div>
              <div class="container-fluid row col-sm-2" v-if="this.$store.state.isAuthenticated === true">
                <button class="btn btn-sm  btn-outline-primary text-primary mt-4" v-if="this.collection[0].game.includes(this.games[0].gameCode) === true" disabled>
                Already In Collection
              </button>

                <button class="btn btn-sm  btn-outline-primary text-primary mt-4" disabled v-else-if="this.userType === 'Game Publisher'">
                Publisher cannot buy new game
              </button>
              <button class="btn btn-sm btn-outline-primary mt-4 " @click="this.storePriceAndRedirect(game.gamePrice)" v-else>Buy Game</button>
              </div>
              <button class="btn btn-outline-primary  btn-sm text-primary mt-4 pt-1" v-else disabled>
                Login to Buy game
              </button>

              <div class="col-sm-4"></div>
              <button class="btn btn-sm btn-outline-secondary col-sm-4 mt-4"
                @click="$router.push('/publisherInfoPage')">About the Publisher</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="bg-box"></div>
  </div>
</template>

<script>
import axios from 'axios'
let collection
let game
let community
let publisher
export default {
  async mounted() {
    await this.createCollectionIfNotExists()
    collection = JSON.parse(localStorage.getItem('collection'))
    game = JSON.parse(localStorage.getItem('gameCode'))
    await this.fetchCommunityOfGame()
    community = JSON.parse(localStorage.getItem('community'))
    console.log("Collection Created/fetched ", community)
    await this.fetchPublisherInfo()
    publisher = JSON.parse(localStorage.getItem('publisher'))
    console.log("Publisher Fetched ", publisher)
    this.collection.push(JSON.parse(localStorage.getItem('collection')))
    this.games.push(JSON.parse(localStorage.getItem('gameCode')))
    this.community.push(JSON.parse(localStorage.getItem('community')))
    this.publisher.push(JSON.parse(localStorage.getItem('publisher')))
    console.log(typeof this.games)
    await this.fetchReviews()
    this.reviews = JSON.parse(localStorage.getItem('gameReviews'))

    console.log(this.collection,this.games)
    this.userType = localStorage.getItem('userType')
    console.log(this.userType,this.reviews[0].user.profilePic)
  },
  data() {
    return {
      collection: [],
      games: [],
      community: [],
      publisher: [],
      reviews: '',
      reviewUsers: [],
      reviewContent: '',
      reviewRating: 0,
      reviewStatus: 'anonymous',
      userType: '',
    };
  },
  methods: {
    async storePriceAndRedirect(price) {
      localStorage.setItem('gamePrice',price)
      localStorage.setItem('buyGame',game.gameCode)
      console.log(game.gameCode)
      this.$router.push('/paymentPage')
    },
    async submitReview() {
      var usertype = localStorage.getItem('userType')
      console.log(usertype)
      console.log(game.gameCode)
      if (usertype === 'Game Publisher') {
        console.log('Inside')
        var userid1 = localStorage.getItem('userid')
        var loggedPublisher = community.gamePublisher
        const formData = {
          rate: this.reviewRating,
          content: this.reviewContent,
          status: this.reviewStatus,
          publisher: loggedPublisher,
          user: userid1,
          game: game.gameCode,
        };
        let form_data = new FormData()
        form_data.append('rate', formData.rate)
        form_data.append('content', formData.content)
        form_data.append('status', formData.status)
        form_data.append('game', formData.game)
        form_data.append('publisher', formData.publisher)
        form_data.append('user', formData.user)
        console.log(this.reviewStatus)
        axios.defaults.headers.common['Authorization'] = 'Token ' + localStorage.getItem('token');
        await axios
          .post("/api/v1/review/create/", form_data)

          .then((response) => {
            // this.$router.push("/communityPage");
            // this.fetchReviews()
            console.log(response.data);
          })
          .catch((error) => {
            console.log(error);
          });
      }
      else {
        var userid = localStorage.getItem('userid')
        const formData = {
          rate: this.reviewRating,
          content: this.reviewContent,
          status: this.reviewStatus,
          user: userid,
          game: game.gameCode,
        };
        console.log(this.reviewStatus)
        let form_data = new FormData()
        form_data.append('rate', formData.rate)
        form_data.append('content', formData.content)
        form_data.append('status', formData.status)
        form_data.append('game', formData.game)
        form_data.append('user', formData.user)
        axios.defaults.headers.common['Authorization'] = 'Token ' + localStorage.getItem('token');
        await axios
          .post("/api/v1/review/create/", form_data)

          .then((response) => {
            // this.$router.push("/introducepage");
            console.log(response.data);
          })
          .catch((error) => {
            console.log(error);
          });
      }
    },
    async fetchReviews() {
      var reviews = null
      var gameReview = []
      axios.defaults.headers.common['Authorization'] = "Token " + localStorage.getItem('token');
      await axios.get('api/v1/review/')
        .then(response => {
          reviews = response.data
        })
        .catch(error => {
          console.log(error)
        })
        
      if (reviews.length > 0) {
        console.log(reviews[0])
        var displayList = []
        var displayObject = {
          content : '',
          rate :  '',
          status: '',
          username: '',
          profilePic: '',
        }
        for (var i = 0; i < reviews.length; i++) {
          if (reviews[i]['game']['gameCode'] == this.games[0]['gameCode']) {
            gameReview.push(reviews[i])
            displayObject.content=reviews[i].content
          displayObject.rate=reviews[i].rate
          displayObject.status=reviews[i].status
          // console.log(reviews[i].user)
          displayObject.username=reviews[i]['user'].username
          displayObject.profilePic=reviews[i].user.profilePic
          displayList.push(displayObject)
          }
        }
        localStorage.setItem('gameReviews', JSON.stringify(gameReview))
        console.log(gameReview)
        console.log("Display ",displayList)
      }
    },
    async fetchPublisherInfo() {
      console.log("Fetching Publlisher Info ")
      axios.defaults.headers.common['Authorization'] = "Token " + localStorage.getItem('token');
      await axios.get('api/v1/publishers/' + String(community['gamePublisher']))
        .then(response => {
          localStorage.setItem('publisher', JSON.stringify(response.data))
        })
        .catch(error => {
          console.log(error)
        })
    },
    async fetchCommunityOfGame() {
      console.log("Fetching Community ", collection, game)
      var communities = null
      // axios.defaults.headers.common['Authorization'] = "Token " + localStorage.getItem('token');
      await axios.get('api/v1/community/')
        .then(response => {
          communities = response.data
        })
        .catch(error => {
          console.log(error)
        })
      for (var i = 0; i < communities.length; i++) {

        if (communities[i]['game'] == game['gameCode']) {
          localStorage.setItem('community', JSON.stringify(communities[i]))
        }
      }
    },
    async createCollectionIfNotExists() {
      var collections = null
      axios.defaults.headers.common['Authorization'] = "";
      await axios.get('api/v1/game-collections/')
        .then(response => {
          collections = response.data
        })
        .catch(error => {
          console.log(error)
        })
      var found = false
      var userid = parseInt(localStorage.getItem('userid'))
      for (var i = 0; i < collections.length; i++) {
        if (userid == collections[i]['user']) {
          localStorage.setItem('collection', JSON.stringify(collections[i]))
          found = true
          break
        }
      }
      if (found === false) {
        var username = localStorage.getItem('username')
        console.log("No Collcetion found creating one")
        let form_data1 = new FormData()
        form_data1.append('collectionName', username + " Collection")
        form_data1.append('user', username)
        console.log(form_data1)
        axios.defaults.headers.common["Authorization"] = "";
        await axios
          .post("/api/v1/game-collections/create/", form_data1)
          .then((response) => {
            localStorage.setItem('collection', JSON.stringify(response.data))
            console.log(response);
          })
          .catch((error) => {
            console.log(error);
          });
      }
      else {
        console.log("Collection Exists ")
      }
      console.log(collections, parseInt(localStorage.getItem('userid')))
    }
  }
};
</script>

<style lang="scss" scoped>
* {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
  text-decoration: none;
  list-style: none;
}

.box {
  width: 1440px;
  height: 1036px;
  background: #1d1e22;
  box-shadow: 0px 4px 100px rgba(0, 0, 0, 0.7);
  border-radius: 70px;
  margin: 0 auto;
  overflow: hidden;
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
  position: relative;
  margin-bottom: 40px;

  .bg-box {
    position: absolute;
    left: 82.36%;
    right: -40.62%;
    top: 51.95%;
    bottom: -33.89%;
    background: rgba(6, 125, 113, 0.3);
    filter: blur(250px);
    // z-index: -1;
  }

  .left-box {
    width: 125px;
    height: 1036px;
    background: #1d1e22;
    box-shadow: 0px 4px 40px rgba(0, 0, 0, 0.3);
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;

    .left-top {
      position: absolute;
      width: 45px;
      height: 45px;
      top: 41px;
      left: 40px;

      img {
        width: 100%;
        height: 100%;
      }
    }

    .left-nav {
      display: flex;
      flex-direction: column;
      align-items: center;

      li {
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 30px;
      }

      li:nth-child(2) {
        margin-bottom: 20px;
      }

      li:nth-child(3) {
        width: 70px;
        height: 70px;
        background-color: #3dbda7;
        border-radius: 50%;
        margin-bottom: 20px;
      }
    }
  }

  .right-box {
    width: 100%;
    margin-left: 35px;
    padding-top: 35px;

    .right-top {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-left: 16px;
      padding-right: 41px;

      .search-box {
        width: 473px;
        height: 50px;
        border-radius: 50px;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        padding-left: 31px;
        background: rgba(100, 110, 109, 0.2);
        overflow: hidden;

        input {
          border: none;
          background-color: transparent;
          height: 100%;
          padding-left: 16px;
          width: 423px;
          outline: 0;
          color: #ffffff;
        }

        input:focus {
          border: none;
        }
      }

      .info-box {
        display: flex;
        justify-content: flex-start;
        align-items: center;

        >div {
          width: 55px;
          height: 50px;
          border-radius: 30px;
          display: flex;
          justify-content: center;
          align-items: center;
          background: linear-gradient(180deg, #393939 0%, #1d1e22 100%);

          // overflow: hidden;
          img {
            width: 100%;
            height: 100%;
          }
        }

        .notice {
          margin-right: 30px;
          position: relative;
        }

        .info-pic {
          overflow: hidden;
          cursor: pointer;
        }

        .dailog-box {
          position: absolute;
          height: 860px;
          width: 334px;
          background: #38393d;
          border-radius: 50px;
          top: 77px;
          right: -74px;
          z-index: 2;
          padding: 0 17px;

          .tit {
            text-align: center;
            font-family: 'Poppins';
            font-style: normal;
            font-weight: 700;
            font-size: 24px;
            line-height: 36px;
            color: #ffffff;
            margin-top: 12px;
          }

          .item {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            position: relative;
            margin-top: 18px;

            .item-pic {
              width: 20%;
              height: 54px;
              background: linear-gradient(180deg, #393939 0%, #1d1e22 100%);
              border-radius: 30px;
              overflow: hidden;

              img {
                width: 100%;
                height: 100%;
              }
            }

            .item-p {
              margin-left: 14px;

              p {
                font-family: 'Poppins';
                font-style: normal;
                font-weight: 500;
                font-size: 16px;
                line-height: 24px;
                color: #ffffff;
              }

              .item-sub {
                font-family: 'Poppins';
                font-style: normal;
                font-weight: 500;
                font-size: 14px;
                line-height: 18px;
                color: #969696;
              }
            }

            .icon {
              position: absolute;
              right: 0;
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #0cde3a;
            }
          }
        }
      }
    }

    .right-con {
      width: 850px;
      margin-top: 65px;

      .con-top {
        width: 50%;
        height: 220px;
        border-radius: 50px;
        background: #071b24;
        overflow: hidden;

        img {
          width: 100%;
          height: 100%;
        }
      }

      .con-txt {
        position: relative;

        .box-tit {
          font-family: 'Poppins';
          font-style: normal;
          font-weight: 500;
          font-size: 18px;
          line-height: 24px;
          color: #ffffff;
          margin-top: 13px;
        }

        .box-sub-tit {
          font-family: 'Poppins';
          font-style: normal;
          font-weight: 500;
          font-size: 16px;
          line-height: 18px;
          color: #969696;
        }

        .con-ul {
          li {
            font-family: 'Poppins';
            font-style: normal;
            font-weight: 500;
            font-size: 14px;
            line-height: 18px;
            color: #969696;
            list-style: outside;
            margin-left: 22px;
          }
        }

        .icon-box {
          position: absolute;
          right: 0;
          bottom: 0;
          display: flex;
          justify-content: center;
          align-items: center;

          >div {
            margin: 0 9px;
          }
        }
      }

      .con-input {
        width: 834p;
        height: 88px;
        background: linear-gradient(95deg,
            rgba(29, 30, 34, 0.65) 7.54%,
            rgba(33, 33, 37, 0.639891) 12.57%,
            rgba(53, 53, 53, 0.582292) 152.45%);
        border-radius: 20px;
        margin-top: 22px;
        padding-left: 41px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-right: 32px;

        input {
          outline: 0;
          border: none;
          background: transparent;
          height: 88px;
          font-family: 'Poppins';
          font-style: normal;
          font-weight: 400;
          font-size: 20px;
          line-height: 30px;
          color: #ffffff;
        }

        .submit {
          width: 55px;
          height: 50px;
          border-radius: 50px;
          display: flex;
          justify-content: center;
          align-items: center;
          background: #2e4240;
        }
      }

      .discuss-box {
        background: linear-gradient(95deg,
            rgba(29, 30, 34, 0.65) 7.54%,
            rgba(33, 33, 37, 0.639891) 12.57%,
            rgba(53, 53, 53, 0.582292) 152.45%);
        border-radius: 20px;
        margin-top: 26px;
        padding-top: 15px;
        height: 209px;
        overflow: hidden;
        padding-right: 34px;

        .dis-item {
          display: flex;
          justify-content: flex-start;
          align-items: center;
          margin-bottom: 45px;

          .dis-pic {
            width: 64px;
            height: 54px;
            background: linear-gradient(180deg, #393939 0%, #1d1e22 100%);
            border-radius: 30px;
            overflow: hidden;
            border-radius: 54px;
            flex-shrink: 0;
            margin-right: 29px;

            img {
              height: 100%;
              width: 100%;
            }
          }

          .dis-txt {
            .dis-name {
              font-family: 'Poppins';
              font-style: normal;
              font-weight: 500;
              font-size: 16px;
              line-height: 24px;
              color: #ffffff;
            }

            .dis-txt-box {
              margin-top: 15px;
              position: relative;

              p {
                font-family: 'Poppins';
                font-style: normal;
                font-weight: 500;
                font-size: 12px;
                line-height: 18px;
                color: #969696;
              }

              .dis-btn-box {
                position: absolute;
                right: 0;
                bottom: -12px;
                display: flex;
                justify-content: center;
                align-items: center;

                >div {
                  margin: 0 11px;
                }
              }
            }
          }
        }
      }
    }
  }
}
</style>
